<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="_common.css" />
</head>
<body>
  <div id="preview"></div>
  <script>
    function aff_render(config) {
      let palette = config.palette;
      let angle = config.angle;
      let direction = config.direction;

      let background;
      if (direction === "custom_angle") {
        background = `linear-gradient(${angle}deg, ${palette[0]}, ${
          palette[1]
        })`;
      } else {
        background = `linear-gradient(to ${direction}, ${palette[0]}, ${
          palette[1]
        })`;
      }
      var preview = document.getElementById("preview");
      preview.style.background = background;
    }
    function aff_download() {
      html2canvas(document.getElementById("preview")).then(function(canvas) {
        const link = document.createElement("a");
        var image = canvas
          .toDataURL("image/png")
          .replace("image/png", "image/octet-stream");
        window.parent.postMessage({ type: "download", image });
        // link.download = "download.png";
        // link.setAttribute("href", image);
        // link.click();
      });
    }
  </script>
  <script src="https://unpkg.com/html2canvas@1.0.0-alpha.12/dist/html2canvas.min.js"></script>
  <script src="_common.js"></script>
</body>
